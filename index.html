<html>
<head>
<title>MPP</title>

<link href="/CodePin.css" rel="styleSheet" type="text/css">
<link href="/CodePin-RSS.css" rel="styleSheet" type="text/css">

<body>

<table width="100%" cellpadding="0" cellspacing="0"><tr>
<td align="left" valign="top">
<h2>MPP</h2>
</td>
<td align="right" valign="top">
<h4><a href="http://codepin.cait.org">CodePin.cait.org</a></h4>
</td>
</tr></table>

<hr size="1" />

<br/>


<!-- full page table --> <table align="left" width="100%"><tr><td valign="top">


<table width="100%" class="NewsItem">
<tr><td class="NewsItemHeader">
<strong>ABOUT</strong>
</td></tr>
<tr><td class="NewsItemBody">
<p>
<h4>MPP</h4>
MPP is a MySQL State Manager for MySQL server failover negotiation and
management.
It is intended to be used as a 2nd party management application
used in combination with any
load balancing management software. It was initially designed to be used in
conjunction with Linux Virtual Server, and later F5 Networks BigIP, but can
work with any load balancer that can utilize external check scripts or
accomplish an HTTP REST call.
MPP now integrates with MySQL Proxy using an injection mechanism.
<br />
<br />
This software allows the configuration of MySQL
servers into a pool. The configured pool is managed based on a logic that is
assigned to it. MPP currently supports generic fail-over logic, and has
intentions to eventually support generic cluster logic.
<br />
<br />
MPP began it's origins in the 2nd half of 2004, and was released into internal
production as proof-of-concept in 2005. Two and a half years later after
testing in a variety of production environments with integration in several 2nd
party controllers, and sights set on MySQL Proxy integration, it is released.
<br />
<br />
MPP is written in PERL, released as Open Source Apache 2 license which is compatible with GPL 3.
</p>

<p>
<h4>MPP Web Service</h4>
The MPP Web Service and Web Client is currently released as gamma. It provides
a Web 2.0 interface to MPP cache files. The polling daemon currently keeps
monitoring data current in the cache, and the Web Service makes the results,
currently as read-only, available to any Web 2.0 able client via REST.
<br/><br/>
A Web 2.0 Client dashboard is bundled with the Web Service. The Web Client
uses XSLT to transform the MPP data into an initial dashboard, and JSON to
keep monitored objects in the dashboard updated from the Web Service.
<br/><br/>
Both Web Service and Client use XML::TreePP and
<a href="/project/perlmod/XML-TreePP-XMLPath">XML::TreePP::XMLPath</a>,
the later module which makes any PERL hash/array ref structure accessible via
an XPath-like accessor methodology.
<br/><br/>
The Web Service will be merged into the MPP core at a later date when it
matures.
<p>

<p>
<!--
<br />
<br />
MPP was developed within a brain trust that implements real-world technology
configurations and deigns under emerging open standards within the enterprise
infrastructure of Center for the Application of Information Technologies at
Western Illinois University 
-->
</p>
</td></tr>
</table>

<br/>

<table width="100%" class="NewsItem">
<tr><td class="NewsItemHeader">
<strong>INTEGRATION</strong>
</td></tr>
<tr><td class="NewsItemBody">
<p>
MPP was written as a 2nd party plugin to controllers. These controllers are
what enact the physical change of state of MySQL nodes.
<ul>
  <li> MPP has been tested under the following controllers:
  <ul>
  <li> <a href="http://www.linuxvirtualserver.org/">Linux Virtual Server</a>
  <li> <a href="http://www.redhat.com/software/rha/cluster/">Red Hat Clustering Suite, Piranha</a>
  <li> <a href="http://www.f5.com/">F5 Network SmartDNS</a>
  <li> <a href="http://www.f5.com/">F5 Network Big IP</a>
  <li> <a href="http://forge.mysql.com/wiki/MySQL_Proxy">MySQL Proxy</a>  (work completed r1.0.1, initial testing completed r1.0.3)
</ul>
</p>
</td></tr>
</table>

<br/>

<table width="100%" class="NewsItem">
<tr><td class="NewsItemHeader">
<strong>REQUIREMENTS</strong>
</td></tr>
<tr><td class="NewsItemBody">
<p>
The PERL requirements for using MPP is as follows:
<ul>
<pre>
  MODULE	MIN VERSION	AVAILABLE
  -----------	-----------	--------------
  CGIbasic	0.010		MPP Bundled
  Config_info	1.00803		MPP Bundled
  LogBasic	0.00.003	MPP Bundled
  Storable	PERL >= 5.8	PERL Bundled
  Net::HTTP	PERL >= 5.8	PERL Bundled
  Net::Ping	PERL >= 5.8	PERL Bundled
  IO::FILE	PERL >= 5.8	PERL Bundled
  DBD::MySQL	2.9006		CPAN
  DBI		1.46		CPAN
</pre>
</ul>
</p>
<p>
The PERL requirements for using the MPP Web Service is as follows:
<ul>
<li> Web Service
  <ul>
    <li> Data::Dump
    <li> XML::TreePP
    <li> XML::TreePP::XMLPath
  </ul>
  <li> Web Client
  <ul>
    <li> Data::Dump
    <li> XML::TreePP
    <li> XML::TreePP::XMLPath
    <li> XML::XSLT
    <li> XML::Tidy
    <li> CGI
    <li> JSON::PP
  <ul>
</ul>
</p>
</td></tr>
</table>

<br/>

<table width="100%" class="NewsItem">
<tr><td class="NewsItemHeader">
<strong>AVAILABILITY</strong>
</td></tr>
<tr><td class="NewsItemBody">
<p>
This software was recently imported from our internal engineering lab,
and has been merged with modification recomendations from our real world implementation.
The resulting code available here has been tested and considered ready for release.
</p>
<p>

<h4>Documentation</h4>

<!-- View the MPP <a href="docs/overview">Overview</a> online.<br/> -->
Read an overview in articles on MPP and State Management on the MySQL Developer Zone:
<ul>
<li /> <!-- a href="http://dev.mysql.com/tech-resources/articles/failover-strategy-part1.html" -->
       <a href="/project/mpp/docs/article1-part1/">MySQL Failover Strategy using State Management, introducing MPP - Part 1</a>
<ul><i>
Having a strategy for failover has become almost standard in the business world. Whether it is a total site failover from a NOC in one city to another, or just a simple redundant server. Over the years many technology solutions have been created for or adopted to MySQL to provide this type of strategy.
</i></ul><br />
<li /> <!-- a href="http://dev.mysql.com/tech-resources/articles/failover-strategy-part2.html" -->
       <a href="/project/mpp/docs/article1-part2/">MySQL Failover Strategy using State Management, introducing MPP - Part 2</a>
<ul><i>
In Part 1 we have seen how the concept of state management works. Now it's time to apply that concept to a load-balancer. In this Part 2 we will look at a strategy for using Linux Virtual Server with MPP for failover, and also take a closer look at the mechanics of MPP itself.
</i></ul><br />
<li /> <!-- a href="http://dev.mysql.com/tech-resources/articles/failover-strategy-part3.html" -->
       <a href="/project/mpp/docs/article1-part3/">MySQL Failover Strategy using State Management, introducing MPP - Part 3</a>
<ul><i>
In part 2 we discussed the internals of MPP and how MPP can be used with LVS to create a failover strategy. In this part 3 we will discuss how to configure and operate MPP, and additionally use MPP with MySQL Proxy to create a failover strategy.
</i></ul><br />
</ul>

View the MPP 
<a href="https://dev-codepin.cait.org/scm/viewvc/mpp/trunk/mpp/INSTALL">INSTALL</a>,
<a href="https://dev-codepin.cait.org/scm/viewvc/mpp/trunk/mpp/LICENSE">LICENSE</a>,
<a href="https://dev-codepin.cait.org/scm/viewvc/mpp/trunk/mpp/NOTICE">NOTICE</a>,
<a href="https://dev-codepin.cait.org/scm/viewvc/mpp/trunk/mpp/README">README</a>,
<a href="https://dev-codepin.cait.org/scm/viewvc/mpp/trunk/mpp/CHANGES">CHANGES</a>,
<a href="https://dev-codepin.cait.org/scm/viewvc/mpp/trunk/mpp/TODO">TODO</a>
 online.
<br/>
View the MPP <a href="https://dev-codepin.cait.org/scm/viewvc/mpp">Subversion repository</a> online.
<br/>
View the MPP Web Service
<a href="https://dev-codepin.cait.org/scm/viewvc/mpp/branches/mpp-ws/README">README</a>,
<a href="https://dev-codepin.cait.org/scm/viewvc/mpp/branches/mpp-ws/CHANGES">CHANGES</a>
 online.
</p>

<h4>Get the code</h4>

<p>
You can download the source code from Subversion.
<ul>
  <li> Subversion trunk: <a href="https://dev-codepin.cait.org/svn/mpp/trunk/mpp">https://dev-codepin.cait.org/svn/mpp/trunk/mpp</a>
  <li> Subversion tags (revisions): <a href="https://dev-codepin.cait.org/svn/mpp/tags/mpp">https://dev-codepin.cait.org/svn/mpp/tags/mpp</a>
  <li> <b>Latest Revisions:</b>
<table cellpadding="5">
<tr><td>date</td><td>revision</td><td>tarball</td><td>summarized description</td></tr>

<tr><td valign="top">2007.12.10</td>
    <td valign="top">1.0.3</td>
    <td valign="top"><a href="archive/mpp-1.0.3.tgz">mpp-1.0.3.tgz</a></td><td>
<code>mysql-polld</code> daemon-like script is created for the replacement of the cron
option for polling nodes. Initial testing for integration with MySQL Proxy
0.6.0 has been completed. Various fixes and updates.
</td></tr>

<tr><td valign="top">2007.11.16</td>
    <td valign="top">1.0.2</td>
    <td valign="top"><a href="archive/mpp-1.0.2.tgz">mpp-1.0.2.tgz</a></td><td>
The <code>mpp.lua</code> file has been updated to address an issue I refer to as "all_node_down", where all Proxy backend
servers are down and MPP cannot connect to load its evaluations into Proxy. This version also address the issue where
you could not supply a blank password to <code>mpp-proxyadmin.pl</code>. This version also contains a work around for
MySQL <a href="http://bugs.mysql.com/32464">Bug #32464</a> for DBD::mysql.
</td></tr>

<tr><td valign="top">2007.11.13</td>
    <td valign="top">1.0.1</td>
    <td valign="top"><a href="archive/mpp-1.0.1.tgz">mpp-1.0.1.tgz</a></td><td>
Integration with MySQL Proxy Tested. Added a <code>mysqlproxy</code> host module into the API set,
<code>mpp.lua</code> Lua script for MySQL Proxy,
and created an admin application <code>mpp-proxyadmin.pl</code> to manage MPP evaluations from MPP cache into Proxy internals.
</td></tr>

<tr><td valign="top">2007.11.11</td>
    <td valign="top">1.0.0</td>
    <td valign="top"><a href="archive/mpp-1.0.0.tgz">mpp-1.0.0.tgz</a></td><td>
First release. Integration with Linux Virtual Server and F5 Networks BigIP tested.
</td></tr>

</table>
</ul>
</p>

<p>
The code for MPP Web Service is available for download:
<ul>
  <li> Web Service revisions: <a href="https://dev-codepin.cait.org/svn/mpp/tags/mpp-ws">https://dev-codepin.cait.org/svn/mpp/tags/mpp-ws</a>
  <li> <b>Web Service Latest Revisions:</b>
<table cellpadding="5">
<tr><td>date</td><td>revision</td><td>tarball</td><td>summarized description</td></tr>

<tr><td valign="top">2009.06.30</td>
    <td valign="top">0.0.1-gamma</td>
    <td valign="top"><a href="archive/mpp-ws-0.0.1-gamma.tgz">mpp-ws-0.0.1-gamma.tgz</a></td><td>
First release. A read-only dashboard to MPP Monitoring data.
</td></tr>

</table>
</ul>
</p>

</td></tr>
</table>

<br/>

<table width="100%" class="NewsItem">
<tr><td class="NewsItemHeader">
<strong>FUTURE</strong>
</td></tr>
<tr><td class="NewsItemBody">
<p>
There is a plan in progress that MPP will be combined into MySQL Proxy. The plan is multi-phased:
<ol>
  <li> MPP revision 1.0.1 gave us MySQLProxy+MPP combination by handshake - getting them to talk to each other.
  <li> MPP Revision 1.0.3 gave us a daemon to perform the polling, rather than relying on cron for implementation
  <br/> <i>Depending on how MySQL Proxy evolves, one of the two will happen:</i>
  <ol>
    <li> A newer web 2.0 enabled polling manager daemon process
    <li> Polling managed by Proxy, and manageable through a web 2.0 interface
  </ol>
  <li> We want these load balancing methods in MySQL Proxy using Lua, and relying on MPP for the logic:
  <ul>
    <li> round robin (this is the default, and currently the only implementation)
    <li> read-only versus read-write, SQL query load balancing (this is the next desired implementation)
    <li> weighted connections
    <li> least connections
    <li> weighted least connections
  </ul>
  <li> <i>Depending on the future development of MySQL Proxy, the following may happen:</i>
  <ol>
  <li> Parts of MPP converted in Lua Snipits using PERL
       <a href="http://search.cpan.org/~vparseval/Inline-Lua-0.03/lib/Inline/Lua.pm">Inline::Lua</a>;
       Lua Snipts integrated into MySQL Proxy.
  <li> Merging of MPP into MySQL Proxy without external dependencies, with the following attributions:
  <ul>
       <li> MPP-as-Lua still packageable into a MPP PERL-library using Inline:Lua for 2nd party integration into other controllers.
       <li> MPP Clients can/will be written for managing MPP logic in a running MySQL Proxy implementation of MPP.
       <br /> &nbsp;&nbsp;&nbsp;&nbsp; (This allows the administrator to say, "Uh.. change your mind to make this decision instead."
              Ex: "I don't care if the STANDBY is in [replication] FAILure, promote it to ACTIVE and fail-over to it anyway.")
  </ul>
  </ol>
</ol>

<b>Purpose:</b> MPP has the ability right now to supervise master fail-over.
The physical execution of a master fail-over is still reliant upon a controller like MySQL Proxy.
<br />
MPP was written to act as a plugin, to add intelligence to 2nd party controllers. MPP negotiates
MySQL node States of ACTIVE, STANDBY, FAIL and Statuses of OK, INFO, WARN, CRITICAL, FAIL in a transitional flow.

</p>
</td></tr>
</table>


<!-- full page table --> </td><td valign="top">


<div id="rssbox" style="width:250px">
<table class="NewsItem">
  <tr><td class="NewsItemHeader"><strong>Project&nbsp;NEWS</strong></td></tr>
  <tr><td>
<script language="JavaScript" src="http://itde.vccs.edu/rss2js/feed2js.php?src=http%3A%2F%2Frglaue-tech.blogspot.com%2Ffeeds%2Fposts%2Fdefault%2F-%2FMPP&chan=n&num=5&desc=1&date=n&targ=n" type="text/javascript"></script>
<noscript>
<a href="http://itde.vccs.edu/rss2js/feed2js.php?src=http%3A%2F%2Frglaue-tech.blogspot.com%2Ffeeds%2Fposts%2Fdefault%2F-%2FMPP&chan=n&num=5&desc=1&date=y&targ=n&html=y">View RSS feed</a>
</noscript>
  </td></tr>
</table>
</div>


<!-- full page table --> </td></tr></table>


<br/>

<hr size="1" />
<address class="copyright">
<a href="http://codepin.cait.org">CodePin.cait.org</a>,
&copy; 2006 - 2009
<a href="http://www.cait.org">Center for the Application of Information Technologies</a>,
<a href="http://www.wiu.edu">Western Illinois University</a>
</address>

</body>
</html>
